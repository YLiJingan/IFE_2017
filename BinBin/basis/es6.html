<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>闭包 箭头函数 generator</title>
</head>
<body>
	<h1>闭包</h1>
	<script type="text/javascript">
		/*闭包*/
		// function sum(arr){                       //调用sum函数立即求和
		// 	return arr.reduce(function(x,y){
		// 		return x+y;
		// 	});
		// }
		// var arr =[1,2,3];
		// alert(sum(arr));

		// function lazy_sum(arr){
		// 	var sum = function(){
		// 		return arr.reduce(function(x,y){
		// 			return x+y;
		// 		});
		// 	};
		// 	return sum;
		// }

		// var arr = [1,2,3,4];
		// var f = lazy_sum(arr);   //返回sum函数
		// alert(f());              //执行sum

		// function count(){
		// 	var arr = [];
		// 	for(var i=0;i<=3;i++){
		// 		arr.push(function(){
		// 			return i*i;
		// 		});
		// 	}
		// 	return arr;
		// }

		// var result = count();  //return arr=[function,function,function,function]for循环已经执行完毕，此时i已经是4*/
		// var f1 = result[0];     //f1 = function
		// var f2 = result[1];
		// var f3 = result[2];
		// alert(f1());            //执行function  i已经是4了，所以返回全部时16
		// alert(f2());
		// alert(f3());

		// function count(){
		// 	var arr = [];
		// 	for(var i=1;i<=3;i++){
		// 		arr.push((function(n){
		// 			return function(){
		// 				return n*n;
		// 			}
		// 		})(i));             //创建一个匿名函数并立即执行 i作为参数
		// 	}
		// 	return arr;
		// }

		// var result = count();
		// var f1 = result[0];
		// var f2 = result[1];
		// var f3 = result[2];
		// alert(f1());   //1
		// alert(f2());   //4
		// alert(f3());   //9

		// function create_counter(initial){
		// 	var x = initial || 0;
		// 	return {
		// 		inc:function(){
		// 			x+=1;              //借助闭包封装了一个私有变量
		// 			return x;
		// 		}
		// 	}
		// }
		// var a = create_counter(0);   //从外部根本无法访问到变量x。闭包就是携带状态的函数，并且他的状态完全对外隐藏
		// for(var i=0;i<5;i++){
		// 	alert(a.inc());
		// }

	</script>
</body>
</html>